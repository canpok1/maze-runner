# プロジェクト構造ルール

このドキュメントは、プロジェクトのディレクトリ構造とファイル配置のルールを定義します。

> **Note**: 現在のプロジェクトは単一ワークスペースですが、将来的なモノレポ化を見据えた構造を採用しています。

## モノレポ構造

プロジェクトは以下のモノレポ構造を採用します:

```
maze-runner/
├── frontend/      # Vite + Canvas 2D
├── backend/       # Hono + Cloudflare D1
├── lib/           # 共有型定義
└── package.json   # npm workspaces設定
```

## 各ディレクトリの役割

### `frontend/`
フロントエンドアプリケーションを配置します。

- **技術スタック**: Vite + Canvas 2D
- **責務**: ゲームUIの描画、ユーザー入力の処理、ゲームロジックの実行
- **ビルド成果物**: 静的ファイル（HTML/CSS/JS）

### `backend/`
バックエンドAPIを配置します。

- **技術スタック**: Hono + Cloudflare D1
- **責務**: APIエンドポイントの提供、データベースアクセス、ビジネスロジックの実行
- **デプロイ先**: Cloudflare Workers

### `lib/`
フロントエンドとバックエンドで共有する型定義を配置します。

- **内容**: TypeScriptの型定義、インターフェース、共通の定数
- **目的**: フロントエンドとバックエンド間の型安全性を確保
- **使用例**: APIリクエスト/レスポンスの型、ゲームデータの型

## ファイル配置ルール

### ソースコードの配置

各ワークスペースのソースコードは `src/` ディレクトリ内に配置します。

```
frontend/
└── src/
    ├── main.ts
    ├── game/
    └── ui/

backend/
└── src/
    ├── index.ts
    ├── api/
    └── db/

lib/
└── src/
    └── types/
```

### テストファイルの配置

ユニットテストはソースファイルと同じ場所に配置します（co-location）。

```
src/
└── game/
    ├── player.ts
    └── player.test.ts  # player.tsと同じ場所
```

詳細は[テストルール](./testing-rules.md)を参照してください。

### 共有型定義の配置

フロントエンドとバックエンドの両方で使用する型定義は `lib/src/types/` に配置します。

```
lib/
└── src/
    └── types/
        ├── api.ts      # API関連の型
        ├── game.ts     # ゲーム関連の型
        └── common.ts   # 共通の型
```

## ディレクトリ命名規則

- すべて小文字を使用する
- 単語の区切りにはハイフン（`-`）を使用する
- 単数形を避け、複数形を使用する（例: `component` ではなく `components`）

## その他のベストプラクティス

- 関連するファイルは同じディレクトリにまとめる
- ディレクトリの階層は3階層以内に抑える
- ファイル名は内容を明確に表すものにする
- 詳細なコーディング規約は[コーディングルール](./coding-rules.md)を参照する
