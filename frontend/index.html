<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>一人称3D迷路ゲーム</title>
    <link rel="stylesheet" href="/src/styles/style.css">
</head>
<body>

<!-- HUD (タイマー表示) -->
<div id="hud">タイム: <span id="timer">0.00</span>s</div>

<!-- メニュー / 結果画面 -->
<div id="menu">
    <h1>3D MAZE RUNNER</h1>
    <p>赤いゴールを目指して進め！</p>
    <button class="diff-btn easy" data-size="11">初級 (11x11)</button>
    <button class="diff-btn normal" data-size="17">中級 (17x17)</button>
    <button class="diff-btn hard" data-size="23">上級 (23x23)</button>
    <div id="last-score"></div>

    <!-- ランキング表示 -->
    <div id="ranking-section">
      <h3>ランキング</h3>
      <div class="ranking-tabs">
        <button class="ranking-tab active" data-difficulty="easy">初級</button>
        <button class="ranking-tab" data-difficulty="normal">中級</button>
        <button class="ranking-tab" data-difficulty="hard">上級</button>
      </div>
      <div id="ranking-loading" class="hidden">読み込み中...</div>
      <div id="ranking-empty" class="hidden">ランキングデータがありません</div>
      <div id="ranking-error" class="hidden ranking__error">データの取得に失敗しました</div>
      <ol id="ranking-list"></ol>
    </div>
</div>

<!-- ゲーム描画領域 -->
<div id="canvas-container">
    <canvas id="gameCanvas"></canvas>
</div>

<!-- スマホ操作ボタン -->
<div id="controls">
    <div class="ctrl-btn btn-up" id="forward">⬆️</div>
    <div class="ctrl-btn btn-left" id="left">↩️</div>
    <div class="ctrl-btn btn-down" id="backward">⬇️</div>
    <div class="ctrl-btn btn-right" id="right">↪️</div>
</div>

<!-- スコア登録モーダル -->
<div id="score-modal" class="modal hidden">
  <div class="modal-content">
    <h2>クリアおめでとう！</h2>
    <p id="score-display"></p>
    <!-- ランクインメッセージ -->
    <p id="rank-message" class="rank-message hidden"></p>
    <!-- ランク外メッセージ -->
    <p id="not-ranked-message" class="not-ranked hidden">
      トップ10にランクインできませんでした
    </p>
    <div id="registration-form">
      <div class="name-input-container">
        <label for="player-name">プレイヤー名</label>
        <input type="text" id="player-name" maxlength="20" placeholder="名前を入力">
        <span id="name-error" class="error-text"></span>
        <span id="submit-error" class="error-text hidden"></span>
      </div>
      <div class="modal-buttons">
        <button id="submit-score-btn" class="btn submit-btn">登録</button>
        <button id="skip-score-btn" class="btn skip-btn">スキップ</button>
      </div>
    </div>
  </div>
</div>

<!-- ランキング詳細モーダル -->
<div id="ranking-detail-modal" class="modal hidden">
  <div class="modal-content">
    <h2>ランキング詳細</h2>
    <div class="detail-item">
      <span class="detail-label">順位</span>
      <span id="detail-rank" class="detail-value"></span>
    </div>
    <div class="detail-item">
      <span class="detail-label">プレイヤー名</span>
      <span id="detail-player-name" class="detail-value"></span>
    </div>
    <div class="detail-item">
      <span class="detail-label">クリアタイム</span>
      <span id="detail-clear-time" class="detail-value"></span>
    </div>
    <div class="detail-item">
      <span class="detail-label">登録日時</span>
      <span id="detail-created-at" class="detail-value"></span>
    </div>
    <button id="detail-close-btn" class="detail-close-btn">閉じる</button>
  </div>
</div>

<script type="module" src="/src/main.ts"></script>
</body>
</html>
