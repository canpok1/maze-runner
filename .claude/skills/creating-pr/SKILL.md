---
name: creating-pr
description: 作業ブランチの修正内容を把握し、プルリクエストのタイトルと本文を作成してPRを作成します。コード修正完了後にPRを作成する場合や、`/creating-pr` コマンドが実行された場合に使用してください。
layer: feature
---
## 手順
1. 現在の作業ブランチを確認する。
    - `main` ブランチの場合、PR作成できないことをユーザーに伝えて作業終了。
2. 作業ブランチにコミットされた修正内容を把握する。
3. プルリクエストのタイトルと本文を作成する。
    - `document-specialist` エージェントと協力して作成すること。
4. `managing-github` スキルの `scripts/pr-create.sh` を使用してプルリクエストを作成する。
    - 詳細な使用方法は `.claude/skills/managing-github/PR-OPERATIONS.md` の「PR作成」セクションを参照
5. PR作成後の検証と自動修正を行う。
    - 手順3で作成したタイトルと本文を変数に保持しておく
    - `managing-github` スキルの `scripts/pr-get.sh` で作成したPRの実際の情報を取得する
    - 以下を検証：
        - 手順3で作成したタイトル ＝ 作成されたPRのタイトル
        - 手順3で作成した本文 ＝ 作成されたPRの本文
    - 不一致が検出された場合：
        - 不一致の詳細（期待値と実際の値）をログ出力
        - `managing-github` スキルの `scripts/github-rest.sh` を使用して、PRのタイトルと本文を正しい内容に自動修正（`PATCH /repos/{owner}/{repo}/pulls/{PR番号}`）
        - 修正が成功した場合は修正完了をユーザーに報告
        - 修正が失敗した場合はエラー内容をユーザーに報告し、手動修正を依頼
    - 一致している場合は次の手順へ進む
6. 作成したプルリクエストのタイトルとURLをユーザーに伝えて作業終了。
