---
name: requesting
description: GitHub Issueを作成します。story/taskラベルを内容に応じて自動付与します。
---

## 概要

ユーザーと対話してIssueの内容を定義し、GitHub Issueとして登録するワークフローです。
Issue の種別（story/task）に応じて適切なラベルを自動付与します。

## 手順

1. Issueの内容をユーザーと対話して決定する。
    - 引数で概要が指定されている場合は、それを基に詳細を確認する。
    - AskUserQuestionツールを使用してIssueの種別と内容を確認:
        - **storyの場合（ユーザーに価値を提供する機能・改善）**:
            - 誰が（ユーザーの種類・ロール）
            - 何をしたいか（実現したい機能・行動）
            - なぜ必要か（その機能による価値・目的）
            - 受け入れ条件（どうなれば完了か）
        - **taskの場合（具体的な実現方法・技術的タスク）**:
            - タスクの目的
            - 実施内容の詳細
            - 完了条件
2. `document-specialist` エージェントに依頼してIssueの本文を「Issue作成ルール」に従って生成する。
3. Issue本文生成後、タイトルと本文をユーザーに提示する。
    - AskUserQuestionツールを使用してユーザーの承認を得る。
    - ユーザーから修正指示があった場合は、その指示に従ってタイトルや本文を修正し、再度提示して承認を求める。
    - ユーザーの承認が得られたらIssue作成に進む。
4. `github` スキル（`issue-create.sh`）を使用してIssueを作成する。
    - **storyの場合**: `--label story` を指定
    - **taskの場合**: `--label task` を指定
5. 作成したIssueのタイトルとURLをユーザーに報告する。
6. storyラベルの場合のみ、タスク細分化が必要か確認し、必要であれば `/breaking-down-story` コマンドの利用を案内する。

## Issue作成ルール

### タイトル

**storyの場合**:
ユーザーのニーズを一文で表現する（例: 「ログイン時にパスワードを忘れた場合に再設定できるようにしたい」）。実装手段ではなく、ユーザーが何を求めているかを書く。

**taskの場合**:
実施するタスクを簡潔に表現する（例: 「パスワードリセット機能のAPIエンドポイントを実装する」）。

### 本文構成

#### storyの場合

##### ユーザーストーリー
[ユーザーの種類]として、[実現したいこと]をしたい。なぜなら[その理由・価値]だからだ。

##### 背景
なぜこの機能が必要なのかを簡潔に説明する。

##### 現状
現在の状態や問題点を具体的に記述する。

##### 期待する結果
この機能が実装された後のあるべき姿を明確に定義する。

##### 受け入れ条件
- [ ] 具体的な完了基準をチェックボックス形式で列挙する。

##### 補足情報
技術的制約、関連するIssueやPR、参考リンクなどがあれば記載する。

#### taskの場合

##### 目的
このタスクを実施する目的を簡潔に説明する。

##### 実施内容
具体的な作業内容を記述する。

##### 完了条件
- [ ] 具体的な完了基準をチェックボックス形式で列挙する。

##### 補足情報
技術的制約、関連するIssueやPR、参考リンクなどがあれば記載する。

## 注意点

- Issueの内容が曖昧な場合は、推測せず必ずユーザーに確認すること。
- storyの場合は「[ユーザーの種類]として、[実現したいこと]をしたい。なぜなら[その理由・価値]だからだ。」の形式を守ること。
- docs/document-rules.md の規約に従った高品質なIssue本文を作成すること。
- ラベル判断基準:
    - **story**: ユーザーに価値を提供する機能や改善（What/Whyを重視）
    - **task**: 具体的な実現方法や技術的タスク（Howを重視）
- ラベルの運用方針の詳細は CLAUDE.md を参照。
