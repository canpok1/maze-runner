---
name: running-dev
description: タスクIssueの実装からPR作成・レビュー対応・振り返りまでを一括実行します。タスクIssueを自動的に完了させる場合に使用してください。
argument-hint: [GitHub IssueのURLまたは番号]
---
## 手順

このチェックリストをコピーし、進行状況の追跡に使用してください：

タスク進捗：
- [ ] ステップ1：GitHub Issueの番号を決定する
- [ ] ステップ2：Issueの有効性チェックを行う
- [ ] ステップ3：既存PRの確認を行う
- [ ] ステップ4：`/coding` コマンドの手順を実行する（実装・テスト）
- [ ] ステップ5：`/reviewing` コマンドの手順を実行する（自己レビュー）
- [ ] ステップ6：`/creating-pr` コマンドの手順を実行する（PR作成）
- [ ] ステップ7：PRがマージされるまで `/fixing-pr` コマンドを繰り返し実行する
- [ ] ステップ8：`/running-retro` コマンドの手順を実行する（振り返り）

1. GitHub Issueの番号を決定する。
    - 引数でIssue番号が指定されていればそれを使用。
    - 引数がIssue URLならURLから番号を抽出。
    - 引数未指定の場合、以下の条件でIssueを自動選択:
        - `assign-to-claude` ラベルが付いている
        - `in-progress-by-claude` ラベルが付いていない
        - open状態である
        - 上記条件に合致する最も古いIssueを1件選択
    - 自動選択の対象がなければ処理を終了。
2. Issueの有効性チェックを行う。
    - **親Issueの状態確認**: 親Issueがクローズ済みなら「対応不要の可能性あり」。
    - **マージ済みPRの確認**: Issue番号に関連するマージ済みPRを検索し、同等の変更が既にマージされていないか検証。
    - **コードベースとの整合性**: 変更対象が既に存在しない、または期待通りの状態なら「対応不要の可能性あり」。
    - **判定**: 「対応不要の可能性あり」なら理由を添えてユーザーに確認。対応不要と判断されたら `assign-to-claude` ラベルを削除し終了。有効なら手順3へ。
3. 既存PRの確認を行う。
    - Issue番号に対応するopen状態のPRを検索。複数あれば最も新しいものを選択。
    - PR見つかれば手順6へ、なければ手順4へ。
4. `/coding` コマンドを実行（実装・テスト）。
5. `/reviewing` コマンドを実行（自己レビュー）。
6. `/creating-pr` コマンドを実行（PR作成）。
7. PRがマージされるまで、CIの結果やレビューコメントに応じて `/fixing-pr` を繰り返し実行。
    - PRがマージされずにクローズされた場合は報告し作業中断。
8. PRマージ後、`/running-retro` コマンドを実行（振り返り）。

## 注意点
- エラー発生時は報告し作業を中断する。
