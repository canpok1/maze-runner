---
description: ユーザーストーリーを実装タスクに細分化し、GitHub Issueとして登録します。
argument-hint: [ユーザーストーリーのIssue番号]
---

## 概要

既存のユーザーストーリーIssueを分析し、並列実行可能なタスクに細分化してサブIssueとして登録するワークフローです。

## 手順

1. ユーザーストーリーのIssue番号をユーザーに確認する。
    - 引数で指定されている場合、この手順はスキップする。
2. `github` スキルでユーザーストーリーIssueの内容を把握する。
3. ユーザーストーリーを元に「タスク細分化の原則」に従ってタスクを細分化する。
4. 細分化した各タスクについて以下を実行する:
    - `document-specialist` エージェントに依頼してタスクのIssue本文を「タスクIssue作成ルール」に従って生成する。
    - `github` スキル（`issue-create.sh`）でIssueを作成する。
    - `github` スキル（`sub-issue-add.sh`）でユーザーストーリーIssueのサブissueとして登録する。
5. 作成したタスクIssueの一覧（タイトル・URL・依存関係）をユーザーに報告する。

## タスクIssue作成ルール

### タイトル
具体的な作業内容を動詞で開始する（例: 「APIエンドポイントを実装する」「UIコンポーネントを作成する」）。

### 本文構成

#### 概要
このタスクで実装する内容を簡潔に説明する。

#### 親ストーリー
#[ユーザーストーリーのIssue番号] へのリンクを記載する。

#### 実装内容
- 実装する機能の詳細を箇条書きで記載する。
- 主な変更対象のファイルやディレクトリがわかる場合は記載する。

#### 完了条件
- [ ] 具体的な完了基準をチェックボックス形式で列挙する。

#### 依存関係
依存する他タスクがあれば、Issue番号を記載する（なければ「なし（並列着手可能）」と記載）。

## タスク細分化の原則

各タスクは1つのプルリクエスト（PR）に対応する粒度とする。以下の観点で細分化し、並列作業を最大化すること:

1. **PR単位の粒度**: 1タスク = 1PR。レビュー可能な意味のあるまとまりで分割する。
2. **機能領域の分離**: フロントエンド/バックエンド/共有ライブラリなど、独立してマージ可能な単位で分離する。
3. **依存関係の最小化**: 共通の型定義やインターフェースを先行タスクとし、具体的な機能実装を後続の並列タスクとする。
4. **独立してマージ可能**: 各タスクのPRが単体でマージしても壊れない状態を保つ。
5. **テストの同梱**: 機能実装に対応するテストは同一タスク（同一PR）内に含める。

## 注意点

- 各タスクは1つのPRとして完結する粒度で作成すること。
- 各タスクには必ず完了条件と依存関係を明記すること。
- サブissue機能でユーザーストーリーとタスクを紐づけること。
- docs/document-rules.md の規約に従った高品質なIssue本文を作成すること。
- 作成したIssue番号とURLは必ず記録し、ユーザーに報告すること。
- タスクIssue（サブIssue）には `draft` ラベルを付けないこと。`draft` ラベルの運用方針は CLAUDE.md を参照。
