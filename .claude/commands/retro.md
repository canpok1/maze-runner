---
description: 作業セッションを振り返り、.claude/配下の設定改善点を分析してGitHub Issueを作成する
---

## 手順

1. 今回の会話セッションでの作業内容を振り返る。
    - 実施したタスクの種類（Issue対応、PR作成、バグ修正など）
    - 使用したコマンド、スキル、エージェント
    - 発生した問題や非効率だった点
    - スムーズに進んだ点

2. .claude/配下の設定ファイルを確認する。
    - `CLAUDE.md`: 基本的な動作ルール、コミュニケーション方針
    - `agents/`: エージェント定義の明確性、役割分担の適切性
    - `skills/`: スキルの網羅性、実行ロジックの妥当性
    - `commands/`: ワークフローの順序、ステップの過不足

3. 振り返り内容と現在の設定を照らし合わせて分析する。
    - **改善点の分析**
        - 曖昧だった指示や判断に迷った箇所
        - 実行手順の過不足や順序の問題
        - エージェント間の役割分担の重複や不明瞭さ
        - 不足しているスキルやコマンド
        - 実際の運用と乖離している設定
    - **よかった点の分析**
        - うまく機能したパターン、効果的だった運用方法の特定
        - それが設定として明文化されているか、暗黙知のままかの確認
        - 暗黙知のままの場合、設定に反映すべきかを判断する

4. 改善が必要、または、よかった点を設定に反映する必要があると判断した場合、内容に応じて対応を分岐する。
    - 些細な修正（誤字脱字など）の場合: ユーザーに確認の上で直接修正する。
    - 上記以外の場合: 特定した改善点や設定に反映すべきよかった点があれば、それぞれについてGitHub Issueを作成する。ただし作成前に重複チェックを行う。
        1. 作成予定のIssueタイトル全体を検索クエリとして使用し、`github` スキルで既存のopen状態のIssueを検索する。
        2. 類似するIssueが見つかった場合:
            - Issue作成をスキップする。
            - スキップした旨と、既存IssueのタイトルおよびURLを表示する。
        3. 類似するIssueが見つからなかった場合: `github` スキルでIssueを作成する。
            - **改善点のIssue作成の場合**
                - タイトル: 簡潔で具体的な改善内容を示す
                - 本文: 以下を含める
                    - 現状の問題点
                    - 改善提案（具体的な変更内容）
                    - 期待される効果
                - ラベル: Issueの内容に応じて、後述の「ラベルの判断基準」に従い `story` または `task` のいずれかを `issue-create.sh` の `--label` オプションで付与する
            - **よかった点を設定に反映するIssue作成の場合**
                - タイトル: 簡潔で具体的な設定反映内容を示す
                - 本文: 以下を含める
                    - うまく機能したパターンや効果的だった運用方法の説明
                    - 設定に反映する具体的な変更内容（CLAUDE.md、コマンド、スキルへの追記など）
                    - 明文化による期待される効果（再現性向上、一貫性確保など）
                - ラベル: Issueの内容に応じて、後述の「ラベルの判断基準」に従い `story` または `task` のいずれかを `issue-create.sh` の `--label` オプションで付与する

5. 改善不要かつ設定への反映も不要の場合（よかった点が既に明文化されている、または該当なし）は、Issue作成せずその旨をユーザーに報告する。
    - 振り返った結果、特に問題がなかったことを伝える
    - よかった点がある場合は明示的に共有し、現在の設定や運用がうまく機能していることを確認する

## 注意点

- 改善点は具体的かつ実行可能な形で提案すること
- 複数の改善点がある場合、それぞれ独立したIssueとして作成すること
- 主観的な「好み」ではなく、実際に発生した問題や非効率性に基づいて判断すること
- 設定の意図を理解した上で改善を提案すること（既存の方針を尊重する）
- ラベルの判断基準
    - `story`: エンドユーザーや開発者体験に直接価値を提供する改善。ユーザーストーリーとして表現できるもの（例: 「〜として〜したい」）
    - `task`: 内部的な改善や具体的な修正作業。技術的な実装タスクとして表現されるもの
